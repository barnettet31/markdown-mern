import{r as E,u as y,b,c as S,d as A,a as s,e as j,j as c,m as v,s as L,l as N}from"./index-6bcaa87f.js";import{m as n,E as P,A as k}from"./errorModal.component-4597c6fa.js";const q=n.object({email:n.string().email({message:"Enter A Valid Email"}),password:n.string().min(6,{message:"Password must be at least 6 characters"}).max(15,{message:"Password cannot be longer than 15 characters"})}).required(),C=[{required:!0,name:"email",label:"E-mail"},{required:!0,name:"password",label:"Password"}],l={message:"",isError:!1},H=()=>{const[r,i]=E.exports.useState(l),{state:a}=y(),{setSession:m}=b(),u=S(),{isLoading:g,mutateAsync:d,reset:x}=A("login",N,{onSuccess:async({status:e,data:o})=>{e===200&&console.log(o);{const{data:t,status:p,config:w}=await v();if(console.log(w,"me config"),p!==200)throw Error("An error occured while trying to get user data");t&&(await L(t),m(t),setTimeout(()=>u("/welcome",{replace:!0}),50))}},onError:(e,o,t)=>{if(e instanceof Error)throw console.log(o),f(e.message),Error(e.message)},retry:0}),f=e=>i({isError:!0,message:e}),h=()=>{i(l),x()};return r.isError?s(P,{message:`An error occured while trying to signup! ${r.message}`,open:r.isError,callback:h}):g?s(j,{}):c("div",{className:"flex flex-col justify-center min-h-full py-12 sm:px-6 lg:px-8",children:[c("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-center text-gray-900 dark:text-primary-white",children:"Sign in to your account"}),(a==null?void 0:a.success)===!0?s("p",{className:"mt-3 text-xs font-bold text-center",children:"Please log in to your new account"}):null]}),s(k,{schema:q,submitHandler:d,inputs:C})]})};export{H as default};
