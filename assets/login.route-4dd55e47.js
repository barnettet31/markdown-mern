import{r as w,u as E,b as y,c as b,d as S,a as s,e as A,j as i,m as j,s as v,l as L}from"./index-39d9f059.js";import{m as o,E as N,A as P}from"./errorModal.component-ff40ebe3.js";const k=o.object({email:o.string().email({message:"Enter A Valid Email"}),password:o.string().min(6,{message:"Password must be at least 6 characters"}).max(15,{message:"Password cannot be longer than 15 characters"})}).required(),q=[{required:!0,name:"email",label:"E-mail"},{required:!0,name:"password",label:"Password"}],c={message:"",isError:!1},H=()=>{const[r,n]=w.exports.useState(c),{state:a}=E(),{setSession:l}=y(),m=b(),{isLoading:u,mutateAsync:d,reset:g}=S("login",L,{onSuccess:async({status:e,data:h})=>{if(e===200){const{data:t,status:p,config:C}=await j();if(p!==200)throw Error("An error occured while trying to get user data");t&&(l(t),await v(t),setTimeout(()=>m("/welcome",{replace:!0}),50))}},onError:(e,h,t)=>{if(e instanceof Error)throw x(e.message),Error(e.message)},retry:0}),x=e=>n({isError:!0,message:e}),f=()=>{n(c),g()};return r.isError?s(N,{message:`An error occured while trying to signup! ${r.message}`,open:r.isError,callback:f}):u?s(A,{}):i("div",{className:"flex flex-col justify-center min-h-full py-12 sm:px-6 lg:px-8",children:[i("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-center text-gray-900 dark:text-primary-white",children:"Sign in to your account"}),(a==null?void 0:a.success)===!0?s("p",{className:"mt-3 text-xs font-bold text-center",children:"Please log in to your new account"}):null]}),s(P,{schema:k,submitHandler:d,inputs:q})]})};export{H as default};
