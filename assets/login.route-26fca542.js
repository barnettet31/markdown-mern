import{r as w,u as E,b as y,c as b,d as S,a as s,e as A,j as c,m as j,s as v,l as L}from"./index-31915698.js";import{m as o,E as N,A as P}from"./errorModal.component-99ad3e81.js";const k=o.object({email:o.string().email({message:"Enter A Valid Email"}),password:o.string().min(6,{message:"Password must be at least 6 characters"}).max(15,{message:"Password cannot be longer than 15 characters"})}).required(),q=[{required:!0,name:"email",label:"E-mail"},{required:!0,name:"password",label:"Password"}],l={message:"",isError:!1},H=()=>{const[r,n]=w.exports.useState(l),{state:a}=E(),{setSession:m}=y(),u=b(),{isLoading:d,mutateAsync:g,reset:x}=S("login",L,{onSuccess:async({status:e,data:i})=>{if(e===200){const{data:t,status:p,config:C}=await j();if(p!==200)throw Error("An error occured while trying to get user data");t&&(m(t),await v(t),setTimeout(()=>u("/welcome",{replace:!0}),50))}},onError:(e,i,t)=>{if(e instanceof Error)throw console.log(i),f(e.message),Error(e.message)},retry:0}),f=e=>n({isError:!0,message:e}),h=()=>{n(l),x()};return r.isError?s(N,{message:`An error occured while trying to signup! ${r.message}`,open:r.isError,callback:h}):d?s(A,{}):c("div",{className:"flex flex-col justify-center min-h-full py-12 sm:px-6 lg:px-8",children:[c("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-center text-gray-900 dark:text-primary-white",children:"Sign in to your account"}),(a==null?void 0:a.success)===!0?s("p",{className:"mt-3 text-xs font-bold text-center",children:"Please log in to your new account"}):null]}),s(P,{schema:k,submitHandler:g,inputs:q})]})};export{H as default};
